#!/bin/sh

this_name=$0

help() {
    echo "Usage: $this_name --sec N --pname 'process_name'"
    exit
}

if [ $# -lt 2 ]; then
    help
fi

process=""
timeout=""

while [ -n "$1" ]; do
    case "$1" in
        --sec|-s)
            echo $2
            timeout=$2; shift 1;;
        --process_name|-p)
            echo $2
            process=$2; shift 1;;
        --help|-h)
            help;;
        *) shift 1;;
    esac
done

if [ -z $process ] || [ -z $timeout ]; then
    echo "WARN: argument is empty."
    help
fi

echo "Wait for $timeout"
sleep $timeout
pkill $process

echo "$process is killed"
